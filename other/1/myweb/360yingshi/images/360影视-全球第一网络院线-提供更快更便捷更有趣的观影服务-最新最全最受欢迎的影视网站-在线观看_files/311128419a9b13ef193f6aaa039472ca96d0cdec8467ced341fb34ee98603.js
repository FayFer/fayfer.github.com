require(["elego.serverdata","other.monitor"],function(e){var t="",n="",r="";e&&(e.tongji?n=e.tongji:e.has("tongji")&&(n=e.get("tongji"))),r=n;var i=function(){var e=window.location.href,t=e.split("?");if(t[1]){t=t[1].split("#"),t=t[0].split("&");for(var n=0,r=t.length;n<r;n++)if(t[n].indexOf("bid=")>-1)return t[n].split("=")[1]}return""};t=i(),t!=""&&(n.indexOf("?")>-1?r=n+"&bid="+t:r=n+"?bid="+t),monitor.setUrl(n),monitor.getTrack(),monitor2.setUrl(r).getTrack().getClickAndKeydown()});define("elego.mask",["elego.docport","elego.browser","other.jquery"],function(e,t){function o(){var t=e.get();n.style.height=t.height+"px",n.style.width=t.width+"px"}function u(){if(n.style.display==="none")return;i!==undefined&&(window.clearTimeout(i),i=undefined),i=window.setTimeout(o,s)}function a(){n=document.createElement("div"),n.className="g-mask",t.ie6&&(n.innerHTML='<iframe frameborder="0"></iframe>',o(),$(window).on("resize",u)),r.body.appendChild(n),a=function(){}}function f(){a(),n.style.display=""}function l(){n&&(n.style.display="none")}var n,r=window.document,i,s=200;return{show:f,hide:l}});require("eblock.search",function(e){e.init({target:"blank"})});define("eblock.search",["eapp.hotquery","eapp.richquery","eblock.suggest","elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,n,r,i,s,o){function h(){a.on("submit",function(e){l(e)}),a.on("change",function(e){d.emit("change",e)}),f.on("click",function(){return l(a.get()),!1})}function p(o){u="http://#{host}/index.php?kw=#{kw}&from=#{from}",a=new n("js-eb-suggest"),f=s("#js-eb-search-btn"),l=function(e){var t=window.location.host.indexOf("xiankan.com")>0?"so.xiankan.com":"so.360kan.com";e==""&&(e=c);var n="";i.has("from")&&(n=i.get("from"));var s=r(u,{kw:window.encodeURIComponent(e),from:n,host:t});o.target=="self"?window.location.href=s:o.target=="blank"&&window.open(s,"searchwindow")},window.location.host.indexOf("video.haosou.com")>=0&&(l=function(e){s("#search-form").get(0).submit()}),h(),e.on("ready",function(e){c=e}),e.init(a),t.init(a)}var u="http://#{host}/index.php?kw=#{kw}&from=#{from}",a,f,l,c="",d={init:p};return o.eventable(d),d});define("eapp.hotquery",["eblock.suggest","elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,n,r,i){function d(){var e=(new Date).getTime()/6e5+"";e=e.split(".")[0];var t=c?"http://www.xiankan.com":"http://www.360kan.com";r.ajax(t+"/hotquery?cb=?",{data:{fmt:"jsonp",t:e},success:function(e){if(!e||!e[0])return;h=e,g.emit("ready",e[0]),o.val()==""&&(o.val(h[0]),o.addClass(f),s.removeClass("eb-suggest-highlight")),o.click(function(){o.hasClass(f)&&(o.removeClass(f),s.addClass("eb-suggest-highlight"),o.val(""),p.request())}),o.blur(function(){o.val()==""&&(o.val(h[0]),o.addClass(f),s.removeClass("eb-suggest-highlight"))})},dataType:"jsonp",jsonpCallback:"__jsonp0__",cache:!0})}function v(e){p.clear(),r.each(h,function(e,n){p.add(n,t(l,{index:e+1,text:n,className:e<3?"eb-suggest-index-top3":""}),"")}),p.show(),p.cache()}function m(e){p=e,d(),e.on("request",function(t){t===""?(v(e),e.cache(),s.addClass(u)):s.removeClass(u)}),e.on("change",function(t){t===""?e.addClass(u):e.removeClass(u)}),e.on("emptyclick",function(t){t?e.hide():e.request()})}var s=r("#js-eb-suggest"),o=r(".js-query",s),u="eb-suggest-hot",a="eb-suggest-index-top3",f="eb-suggest-blur",l="<em class='eb-suggest-index #{className}'>#{index}</em><span>#{text}</span>",c=/^(\w+\.)*xiankan\.com/.test(location.hostname),h=null,p,g={init:m};return i.eventable(g),g});define("eapp.richquery",["eblock.suggest","elego.format","elego.serverdata","other.jquery","elego.event"],function(e,t,n,r,i){function h(e,n){e.push(t(f,{content:n},{isEscape:!1}))}function p(e,t){if(e.upinfo==0)return;e.upinfo==e.total?h(t,"\u5168 "+e.upinfo+" \u96c6"):h(t,"\u66f4\u65b0\u81f3\u7b2c "+e.upinfo+" \u96c6")}function d(e,n){var r=[],i="<a class='eb-suggest-detail-item' href='#{url}'>#{name}</a>",s="<span class='eb-suggest-detail-span'>#{name}</span>",o='<a class="eb-suggest-detailbutton" href="#{url}">\u67e5\u770b\u8be6\u60c5</a>',u='<a class="eb-suggest-detail-itemzy" href="#{url}">#{period} #{name}</a>',a='<a class="eb-suggest-xkbutton" href="#{url}">\u8d2d\u4e70\u5728\u7ebf\u7535\u5f71\u7968</a>',f='<a class="eb-suggest-button" href="#{url}">\u7acb\u5373\u64ad\u653e</a>';if(!n.playlink)return t(o,{url:n.url,title:n.title});var l=n.playlink;switch(e){case"dy":switch(l.status){case"play":r.push(t(f,l));break;case"xiankan":r.push(t(a,{url:n.url}))}break;case"dm":case"ds":for(var c=0;c<l.length;c++)l[c].url?r.push(t(i,l[c])):r.push(t(s,l[c]));break;case"zy":r.push(t(u,l));break;default:}return r.join("")}function v(e,t){if(!t)return"";var n=[];switch(e){case"dy":h(n,"\u5bfc\u6f14\uff1a"+t.director.join(" ")),h(n,"\u4e3b\u6f14\uff1a"+m(t.actor)),h(n,"\u7c7b\u578b\uff1a"+m(t.category));break;case"ds":p(t,n),h(n,"\u4e3b\u6f14\uff1a"+m(t.actor)),h(n,"\u5e74\u4ee3\uff1a"+t.year);break;case"dm":p(t,n),h(n,"\u7c7b\u578b\uff1a"+m(t.category)),h(n,"\u5730\u533a\uff1a"+m(t.area));break;case"zy":t.curperiod&&h(n,"\u66f4\u65b0\u81f3\u7b2c "+t.curperiod.replace("\u671f","")+" \u671f"),h(n,"\u4e3b\u6301\u4eba\uff1a"+m(t.director)),h(n,"\u5730\u533a\uff1a"+m(t.area));break;default:}return n.join("")}function m(e){var n=[];if(!e)return"";for(var i=0;i<e.length;i++)n.push(t("<b>#{text}</b>",{text:r.trim(e[i])}));return n.join("")}function g(e){r.getJSON(s,{fmt:"jsonp",ac:"richsug",kw:e},function(n){if(n.errno!==0){c.hide();return}if(n.data===null){c.hide();return}var i=n.data.suglist,s=n.data.detail,o=!1;c.clear(),r.each(i,function(n,i){i.showType=l[i.type];var f;i.type!="none"&&!o?(o=!0,s=s[i.type+"_"+i.info],s?(s.infos=v(i.type,s),i.playlinkHtml=d(i.type,s),r.extend(i,s),f=a):f=u):f=u,c.add(i.word,t(f,i,{isEscape:!1}),e,{type:i.type,id:i.info})}),c.show(),c.cache()})}function y(e,n,i,u,f){r.getJSON(s,{fmt:"jsonp",type:e,id:n,ac:"detail"},function(n){if(n.errno!==0)return;if(n.data===null)return;n=n.data,n.word=f,n.showType=l[e],n.infos=v(e,n),n.playlinkHtml=d(e,n),u.find("."+o).hide(),c.modify(t(a,n,{isEscape:!1}),i)})}function b(e){c=e,c.on("itemclick",function(e){c.hide();if(e.attr&&e.attr.type)if(e.target.tagName.toLowerCase()=="a"||e.target.parentNode.tagName.toLowerCase()=="a")return;c.submit({q:e.q}),c.refreshQuery(e.q)}),c.on("request",function(e){if(e=="")return;g(e)}),c.on("itemselected",function(e){var t=e.attr.type,n=e.attr.id;if(!t||t=="none")return;var r=e.selectedItem.find("."+o);r.length>0?(e.items.find("."+o).hide(),r.show()):y(t,n,e.selectedIndex,e.items,e.q)})}var s="http://video.haosou.com/suggest.php?cb=?",o="eb-suggest-content",u="#{word}<span class='eb-suggest-type'>#{showType}</span>",a=["#{word}","<span class='eb-suggest-type'>#{showType}</span>","<div class='"+o+"'>","<a href='#{url}' class='eb-suggest-img'><img src='#{cover}'/></a>","<h4>#{title}</h4>","#{infos}","<div class='eb-suggest-detail'>","<p class='eb-suggest-playbar'>#{playlinkHtml}</p>","</div>","</div>"].join(""),f="<p class='line'>#{content}</p>",l={none:"",dy:"\u7535\u5f71",ds:"\u7535\u89c6\u5267",zy:"\u7efc\u827a",dm:"\u52a8\u6f2b"},c=null;return{init:b}});define("eblock.suggest",["other.jquery","elego.event","elego.format","elego.json"],function(e,t,n,r){function i(t,n){n=n||{};var r=this._container=e("#"+t);this._input=e(".js-query",r),this._list=e(".js-list",r),this._wrap=e(".js-wrap",r),this._itemClass="js-item",this._onClass="eb-suggest-on",this._itemTpl=n.itemTpl||"<li class='eb-suggest-item js-item' data-q=#{q} data-attr='#{attr}'>#{content}</li>",this._delay=n.delay||200,this._handler=null,this._query=e.trim(this._input.val()),this._skipOnce=!1,this._skipBlur=!1,this._selectedIndex=-1,this._cache={},this._init()}return i.prototype={_setItemOn:function(t){var n=this._getItems();if(n.length===0)return!1;var r=n.filter("."+this._onClass),i=r.length?n.index(r):-1;switch(t){case"up":i--,i<-1&&(i=n.length-1),this._input.data().q===undefined&&this._input.data("q",this._input.val());break;case"down":i++,i>=n.length&&(i=-1),this._input.data().q===undefined&&(this._input.data().q=this._input.val())}n.removeClass(this._onClass);var s="";i==-1?(s=this._input.data("q"),this._input.removeData("q")):s=n.eq(i).addClass(this._onClass).data().q,this._skipOnce=!0,this._input.val(s);var o=this._selectedIndex;return i>=0&&i!==o&&(this._selectedIndex=i,this.emit("itemselected",e.extend({selectedIndex:i,selectedItem:n.eq(i),items:n},n.eq(i).data()))),!0},_init:function(){var t=this;t._input.on("focus",function(){t._handler=window.setInterval(function(){t._request()},t._delay)}),t._input.on("blur",function(){t._request(),t._skipBlur||t.hide(),window.clearInterval(t._handler)}),t._wrap.on("mouseenter",function(){t._skipBlur=!0}),t._wrap.on("mouseleave",function(){t._skipBlur=!1}),t._list.on("mouseenter","."+t._itemClass,function(n){var r=t._getItems();r.removeClass(t._onClass),e(this).addClass(t._onClass);var i=r.index(this),s=t._selectedIndex;s!==i&&(t._selectedIndex=i,t.emit("itemselected",e.extend({selectedIndex:i,selectedItem:r.eq(i),items:r},e(this).data())))}),t._list.on("mouseleave",function(){e(this).removeClass(t._onClass)}),t._list.on("click","."+t._itemClass,function(n){var r=e(this).data("q");t.emit("itemclick",e.extend({target:n.target},e(this).data()))}),t._input.on("click",function(){e.trim(t._input.val())===""&&t.emit("emptyclick",t._wrap.css("display")=="none"?!1:!0)}),t._input.on("keydown",function(e){var n=!1;switch(e.keyCode){case 40:t._setItemOn("down")&&t.show(),n=!0;break;case 38:t._setItemOn("up")&&t.show(),n=!0;break;case 27:t.hide();break;case 13:t.submit({q:t._query}),t.hide()}if(n)return!1})},_request:function(){var t=e.trim(this._input.val());if(t!==this._query){this._query=t;if(this._skipOnce){this._skipOnce=!1;return}this._cache[t]!==undefined?this._fill(this._cache[t]):this.emit("request",this._query),this.emit("change",this._query)}},refreshQuery:function(e){this._query=e,this._input.val(e)},request:function(){var t=e.trim(this._input.val());this._cache[t]!==undefined?this._fill(this._cache[t],t):this.emit("request",this._query)},submit:function(e){this._input.val(e.q),this._query=e.q,this.emit("submit",e.q)},_fill:function(e){this.clear(),this._list.html(e),e===""?this.hide():this.show()},_getItems:function(){return this._list.find("."+this._itemClass)},clear:function(){this._list.empty()},modify:function(e,t){if(t===undefined)throw new Error("index required!");if(t!=this._selectedIndex)return;this._getItems().eq(t).html(e)},add:function(e,t,i,s){if(i===undefined)throw new Error("query required!");if(i!=this._query)return;var o={q:e,content:t};s&&(o.attr=r.stringify(s)),this._list.append(n(this._itemTpl,o,{isEscape:!1}))},cache:function(){this._cache[this._query]=this._list.html()},show:function(){this._wrap.show()},hide:function(){this._wrap.hide()},get:function(){return this._query},addClass:function(e){this._container.addClass(e)},removeClass:function(e){this._container.removeClass(e)}},t.eventable(i),i});define("elego.cookie",function(){function e(e){e=e||{},this.path=e.path||"/",this.domain=e.domain||"",this.expires=e.expires||31536e6,this.secure=e.secure||""}return e.prototype={set:function(e,t){var n=new Date;typeof this.expires=="number"&&n.setTime(n.getTime()+this.expires),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";path="+this.path+(this.domain==""?"":"; domain="+this.domain)+(this.secure?"; secure":"")},get:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):""},has:function(e){return this.get(e)===""?!1:!0},remove:function(e){var t=this.expires;this.expires=-31536e6,this.set(e,""),this.expires=t}},e.set=function(t,n,r){(new e(r)).set(t,n)},e.get=function(t,n){return(new e(n)).get(t)},e.remove=function(t,n){(new e(n)).remove(t)},e.has=function(t){return(new e).has(t)},e});define("eblock.my",["other.jquery","eblock.join","elego.event"],function(e,t,n){function c(n){o=!0,s.css({background:"none"}),s.html('<img class="eb-ucenter-portrait" src="'+n.img_url+'">'+n.nickname),r.mouseenter(function(){a=setTimeout(function(){i.find("ul").html(['<li class="eb-ucenter-layer-item">','<a target="_blank" class="item-icon" href="http://my.360kan.com/u/index/',n.qid,'?q=discuss">\u4e2a\u4eba\u4e2d\u5fc3</a>',"</li>",'<li class="eb-ucenter-layer-item">','<a target="_blank" class="item-icon" href="http://my.360kan.com/u/index/',n.qid,'">\u6211\u7684\u6536\u85cf</a>',"</li>",'<li class="eb-ucenter-layer-item">','<a target="_blank" class="item-icon" href="http://my.360kan.com/u/index/',n.qid,'?q=ticket">\u7535\u5f71\u7968</a>',"</li>",'<li class="eb-ucenter-layer-item">','<a target="_blank" class="item-icon" href="http://my.360kan.com/login/profile/">\u8d26\u53f7\u8bbe\u7f6e</a>',"</li>",'<li class="eb-ucenter-layer-item">','<a  class="item-icon js-out" href="javascript:;">\u9000\u51fa</a>',"</li>"].join("")),e(".js-out",r).click(function(){return t.signOut(),!1}),i.show()},f)}),r.mouseleave(function(){a&&clearTimeout(a),i.hide()})}function h(){r.click(function(e){if(o)return;t.signIn()}),t.once("ready",function(e){e.isLogin&&(o=!0,c(e)),u=!0}),t.on("loginsucc",function(e){o=!0,c(e.systemdata),u=!0}),i.on("click","a",function(e){i.hide()})}function p(){t.signIn()}function v(e,t){e!="login"?d.call(l,e,t):u?t({isLogin:o}):d.call(l,e,t)}var r=e("#js-ebucenter"),i=e(".js-layer",r),s=e(".js-my",r),o=!1,u=!1,a=null,f=300,l={};t.init(),l={setLogin:c,signIn:p},n.eventable(l),h();var d=l.on;return l.on=v,l});define("eapp.record","elego.cookie",function(e){var t=10,n=",",r="|",i=window.location.hostname,s=i.indexOf("360kan.com")>0?"360kan.com":"v.360.cn",o={total:"total_history",dianying:"dianying_history",tv:"dianshi_history",dongman:"dongman_history",zongyi:"zongyi_history",all:"view_history"},u={total:"total",dianying:"dianying",tv:"tv",dongman:"dongman",zongyi:"zongyi"},a={total:"total",dianying:"movie",tv:"tv",dongman:"cartoon",zongyi:"zy"},f={get:function(t){var n="",r;return r=e.get(t),n=null==r?"":r,n},set:function(t,n){e.set(t,n,{domain:s,expires:2592e6,path:"/"})},remove:function(t){e.remove(t,{domain:s,path:"/"})},setLocalStore:function(e,t,n,r){var i=e.get(t);i||(i={list:[]}),i[n]||(i[n]=[],i.list.push(n)),i[n].push(r),i.list.length>=11&&delete i[i.list.shift()],e.set(t,i)},getSKeyByType:function(e){return o[e]},getVideotypeByPlaytype:function(e){return u[e]},getDomPrefixByPlaytype:function(e){return a[e]},getAllVideoType:function(){var e=[];for(var t in o)e.push(t);return e},getAllPlayType:function(){var e=[];for(var t in u)e.push(t);return e},makeARecord:function(e,t,n,i,s,o,u,a){var f=typeof i=="undefined"||""==i?+(new Date):i;return typeof s=="undefined"?[e,t,n,f,a].join(r):[e,t,n,f,s,o,u,a].join(r)},parseAKey:function(e){var t=f.getSKeyByType(e),i=f.get(t),s,o=[],u;if(""==i)return[];e=="all"?s=i.match(/((.*?)\|(movie|tv|comics|arts))(,)?/g):s=i.split(n);if(!s)return[];for(var a=0;a<s.length;++a){var l=s[a];l.substring(l.length-1,l.length)==","&&(l=l.substring(0,l.length-1)),u=l.split(r),u.length==8&&o.push({movie_id:u[0],title:u[1],url:u[2],watch_time:u[3],now_playing:u[4],new_id:u[5],site_name:u[6],play_type:u[7]})}return o},pushARecord2AKey:function(e,r,i,s,o,u,a,l){var c=f.getSKeyByType(e),h=f.parseAKey(e),p,d=[],v;for(var m=0;m<h.length;++m)if(r==h[m]["movie_id"]){h.splice(m,1);break}typeof o=="undefined"?d.push(f.makeARecord(r,i,s,"",l)):d.push(f.makeARecord(r,i,s,"",o,u,a,l));for(m=0;m<h.length;++m){v="tv"==e?10:t;if(d.length>=v)break;p=h[m],typeof p["now_playing"]=="undefined"?d.push(f.makeARecord(p.movie_id,p.title,p.url,p.watch_time,p.play_type)):d.push(f.makeARecord(p.movie_id,p.title,p.url,p.watch_time,p.now_playing,p.new_id,p.site_name,p.play_type))}f.set(c,d.join(n))},removeAMovie:function(e,r){var i=f.getSKeyByType(e),s=f.parseAKey(e),o=[];for(var u=0;u<s.length;++u)if(r==s[u]["movie_id"]){s.splice(u,1);break}for(u=0;u<s.length;++u){if(o.length>=t)break;tmp=s[u],typeof tmp["now_playing"]=="undefined"?o.push(f.makeARecord(tmp.movie_id,tmp.title,tmp.url,tmp.watch_time,tmp.play_type)):o.push(f.makeARecord(tmp.movie_id,tmp.title,tmp.url,tmp.watch_time,tmp.now_playing,tmp.new_id,tmp.site_name,tmp.play_type))}f.set(i,o.join(n))},removeAKey:function(e){var t=f.getSKeyByType(e);f.remove(t)}};return f});require(["other.jquery","eapp.record","elego.format"],function(e,t,n){var r=e("#js-ebrecord"),i=e("#js-ebrecord-layer"),s=e("#js-ebrecord-list"),o={tv:"\u7535\u89c6\u5267",movie:"\u7535\u5f71",comics:"\u52a8\u6f2b",arts:"\u7efc\u827a"},u=null,a=300,f='<li class="eb-ucenter-layer-item"><p class="eb-ucenter-layer-title"><b></b>\u65e0\u89c2\u770b\u8bb0\u5f55</p></li>',l=function(){var r=t.parseAKey("all");if(r.length==0){e("#js-ebrecord-list").html(f);return}var i={month:(new Date).getMonth(),date:(new Date).getDate()},s='<li class="eb-ucenter-layer-item"><p class="eb-ucenter-layer-title"><b></b>#{title}</p>#{itemlist}</li>',u='<p class="eb-ucenter-layer-movie g-clear js-ebucenter-movie"><a target="_blank" href="#{url}" class="name">#{name}</a><span class="desc">#{desc}</span><a title="\u5220\u9664" href="javascript:;" id="#{mid}" class="del js-ebucenter-delete">X</a></p>',a=[],l=[],c=[];for(var h=0,p=r.length;h<Math.min(p,10);h++){var d=new Date(parseInt(r[h].watch_time)),v=d.getMonth(),m=d.getDate();v!=i.month||m!=i.date?l.push(n(u,{url:r[h].url,name:r[h].title,desc:o[r[h].play_type],mid:r[h].movie_id},{isEscape:!1})):a.push(n(u,{url:r[h].url,name:r[h].title,desc:o[r[h].play_type],mid:r[h].movie_id},{isEscape:!1}))}a.length>0&&c.push(n(s,{title:"\u4eca\u5929",itemlist:a.join("")},{isEscape:!1})),l.length>0&&c.push(n(s,{title:"\u66f4\u65e9",itemlist:l.join("")},{isEscape:!1})),e("#js-ebrecord-list").html(c.join(""))};e("#js-ebrecord-list").on("mouseenter",".js-ebucenter-movie",function(t){e(this).addClass("hover")}),e("#js-ebrecord-list").on("mouseleave",".js-ebucenter-movie",function(t){e(this).removeClass("hover")}),e("#js-ebrecord-list").on("click",".js-ebucenter-delete",function(n){var r=e(this).attr("id");return e(this.parentNode).hide(),t.removeAMovie("all",r),e(".js-ebucenter-movie").length==0&&i.hide(),!1}),e("#js-ebrecord-wrap").on("mouseenter",function(e){l(),u=setTimeout(function(){i.show()},a)}),e("#js-ebrecord-wrap").on("mouseleave",function(e){u&&clearTimeout(u),i.hide()}),r.click(function(){return!1})});require(["other.jquery"],function(e){e(".js-ebnav").each(function(t,n){if(e(n).find(".js-ebnav-layer")){var r=e(n).find(".js-ebnav-layer");e(n).mouseenter(function(){r.show()}),e(n).mouseleave(function(){r.hide()})}})});define("lego.slide",["elego.event","other.jquery"],function(e,t){"use strict";function n(e,n){n=n||{},this._effect=n.effect||"fade",this._interval=n.interval||5e3,this._duration=n.duration||r[this._effect],this._index=n.startIndex||0,n.autoplay===undefined?this._autoplay=!0:this._autoplay=n.autoplay,"length"in e&&(e=e[0]);if(!e)return;this._groups=e.children,this._length=this._groups.length,this._items=t(".js-slide-item",e),this._itemsLength=this._groups[0].children.length;for(var i=0,s=this._items.length;i<s;i++)this._items.eq(i).attr("data-index",i);this._handler=null,this._autoplay&&this.start()}n.prototype={getAutoPlay:function(){return this._autoplay},reset:function(){this._items[0].style.display="block",this._items[0].style.left="0";for(var e=1,t=this._items.length;e<t;e++)this._items[e].style.display="none";this._index=0},start:function(){var e=this;e._handler=window.setTimeout(function(){e.gonext()},e._interval)},stop:function(){this._handler!==null&&(window.clearTimeout(this._handler),this._handler=null)},gotoAndStop:function(e){this.stop();if(e==this._index)return;var t=this._getTwoItems(e);this.emit("change",this._index),i[this._effect](t,this._duration)},"goto":function(e){var t=this;t.stop();if(e==t._index)return;var n=this._getTwoItems(e);t.emit("change",t._index),i[t._effect](n,t._duration,function(){t._handler=window.setTimeout(function(){t._handler=null,t._autoplay&&t.gonext()},t._interval)})},goback:function(){this.goto(this._index-1)},gonext:function(){this.goto(this._index+1)},setFocus:function(e,t){this._items.removeClass(t),this._items.eq(e).addClass(t),this.goto(parseInt(e/this._itemsLength))},setEffect:function(e){this._effect=e},_getTwoItems:function(e){e-=0;var t=[];return e<0&&(e=this._length-1),e>=this._length&&(e=0),t=[this._groups[this._index],this._groups[e]],this._index=e,t}};var r={fade:400,slide:600,direcot:0},i=function(){var e=function(){function r(){e&&(e[0].style.cssText=s(0,"none"),e[1].style.cssText=s(1),e=null),n&&(window.cancelAnimationFrame(n),n=null)}function s(e,t){return t=t||"block",";display:"+t+"; opacity: "+e+"; filter: Alpha(opacity = "+e*100+");"}var e,t,n;return function(o,u,a){function l(){var o=new Date-f;e[0].style.cssText=s(i.fadeOut(o,u)),e[1].style.cssText=s(i.fadeIn(o,u)),o>=u?(r(),t()):n=window.requestAnimationFrame(l)}r(),e=o,t=a||function(){},e[1].style.cssText=s(0);var f=new Date;l()}}(),t=function(){function s(){e&&(e[0].style.cssText=o(-r,"none"),e[1].style.cssText=o(0),e=null),n&&(window.cancelAnimationFrame(n),n=null)}function o(e,t){return t=t||"block",";display:"+t+";left:"+e+"px"}var e,t,n,r;return function(u,a,f){function h(){c=(new Date).getTime()-l,e[0].style.cssText=o(i.easeOutQuart(c,0,-r,a)),e[1].style.cssText=o(i.easeOutQuart(c,r,-r,a)),c>=a?(s(),t()):n=window.requestAnimationFrame(h)}r||(r=u[0].offsetWidth),s(),e=u,t=f||function(){},e[1].style.cssText=o(r);var l=(new Date).getTime(),c;h()}}(),n=function(){function s(){e&&(e[0].style.cssText=o(r,"none"),e[1].style.cssText=o(0),e=null),n&&(window.cancelAnimationFrame(n),n=null)}function o(e,t){return t=t||"block",";display:"+t+";left:"+e+"px"}var e=null,t,n,r;return function(u,a,f){function h(){c=(new Date).getTime()-l,e[0].style.cssText=o(i.easeOutQuart(c,0,r,a)),e[1].style.cssText=o(i.easeOutQuart(c,-r,r,a)),c>=a?(s(),t()):n=window.requestAnimationFrame(h)}r||(r=u[0].offsetWidth),s(),e=u,t=f||function(){},e[1].style.cssText=o(r);var l=(new Date).getTime(),c;h()}}(),r=function(e,t){t=t||function(){},e[0].style.display="none",e[1].style.display="",t()},i={fadeIn:function(e,t){return e/t},fadeOut:function(e,t){return 1-e/t},swing:function(e,t){var n=t/e;return.5-Math.cos(n*Math.PI)/2},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeOutQuart:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t}};return{fade:e,direct:r,slide:t,slideright:n}}();return e.eventable(n),n});define("app.imgcolor",function(){return function(e,t){var n=document.createElement("img");n.crossOrigin="Anonymous",n.addEventListener&&n.addEventListener("load",function(){var e=document.createElement("canvas");n.width=n.height=e.width=e.height=1;var r=e.getContext("2d");r.drawImage(n,0,0);try{var i=r.getImageData(0,0,1,1),s=Array.prototype.slice.call(i.data),o="rgb("+s[0]+","+s[1]+","+s[2]+")";t&&t(o)}catch(u){}},!1),n.src=e}});require(["other.jquery","lego.slide","app.imgcolor","elego.serverdata","other.monitor"],function(e,t,n,r,i){"use strict";var s=e("#js-topslider"),o=e(".js-link",s),u=e(".js-bigpic",s),a=e(".js-hint li",s),f=e(".js-topslider-main",s),l=s.data().effect,c=e(".js-trigger a",s),h="on",p=0,d=new t(u),v=[];o.each(function(t,r){var i=e(r).attr("data-img");n(i,function(e){v[t]=e,t===0&&u.css("backgroundColor",v[0])})}),s.on("mouseenter",function(){d.stop()}),s.on("mouseleave",function(){d.getAutoPlay()&&d.start()}),f.click(function(){var e="\u9996\u9875\u7126\u70b9\u56fe";i.buildLog({f:o[p].href,u:r.get("tongji")},"http://haostat.qihoo.com/haoclk.gif"),monitor2.buildLog({f:o[p].href,track:"clk",cId:e,u:r.get("tongji")},"http://top.h.qhimg.com/clk.gif"),window.open(o[p].href)}),c.on("mouseenter",function(){d.gotoAndStop(c.index(this))}),d.on("change",function(e){p=e,c.removeClass(h),c.eq(e).addClass(h),a.hide(),a.eq(e).show(),u.css("backgroundColor",v[e])})});define("lego.slider",["elego.event","other.jquery"],function(e,t){"use strict";function n(e,t){r.call(this,e,t)}function r(e,n){if(e.length>1)throw new Error("context must be one");n=n||{};var r=this;r._index=n.index||0,r._itemList=t(".js-g-slide-item",e),r._two=null,r._effect=n.effect||"fade",r._animate=n.animate||{},r._handler=null,r._interval=n.interval||5e3,r._isAuto=n.isAuto,e.on("mouseenter",function(){r.stop(),r.emit("mouseenter")}),e.on("mouseleave",function(){r._isAuto&&r.start(),r.emit("mouseleave")}),r._isAuto&&r.start()}function i(){var e=this;e._handler=window.setInterval(function(){e.goto({to:e._index+1})},e._interval)}function s(e,t){var n=t.duration||400;e[0].css({left:0,top:0,opacity:1,display:""}).show(),e[1].css({left:0,top:0,opacity:0,display:""}).show(),e[0].animate({opacity:0},n,function(){e[0].hide()}),e[1].animate({opacity:1},n)}function o(e,t){var n=t.duration||600,r=t.easing||"easeOutQuart",i=e[1].width();e[0].css({left:0,top:0}).show(),e[1].css({left:i,top:0}).show(),e[0].animate({left:-i},{duration:n,easing:r,complete:function(){e[0].hide()}}),e[1].animate({left:0},{duration:n,easing:r,complete:function(){}})}function u(e,t){var n=t.duration||600,r=t.easing||"easeOutQuart",i=e[1].width();e[0].css({left:0,top:0}).show(),e[1].css({left:-i,top:0}).show(),e[0].animate({left:i},{duration:n,easing:r,complete:function(){e[0].hide()}}),e[1].animate({left:0},{duration:n,easing:r,complete:function(){}})}function a(e){var t=e.effect||this._effect,n=e.to;n<0&&(n=this._itemList.length-1),n>this._itemList.length-1&&(n=0),this._two=[this._itemList.eq(this._index),this._itemList.eq(n)],this._itemList.stop(!0,!0),this._index=n;switch(t){case"fade":s(this._two,this._animate);break;case"slideLeft":o(this._two,this._animate);break;case"slideRight":u(this._two,this._animate);break;default:}this.emit("change",{index:this._index})}function f(){this.goto({to:this._index+1})}function l(){this.goto({to:this._index-1})}function c(){this._two&&(this.stop(two),this._two=null),this._index=0,this._itemList.hide().eq(0).show()}function h(e){this._two&&(this._two[0].stop(!0,!0),this._two[1].stop(!0,!0)),window.clearInterval(this._handler),this._handler=null}function p(e){this._effect=e}return n.prototype={"goto":a,gonext:f,goback:l,reset:c,start:i,stop:h,setEffect:p},e.eventable(n),n});require(["other.jquery","lego.slider","elego.lazy"],function(e,t,n){function u(){n.loadnow(r.find("img")),u=function(){}}var r=e("#js-online-slide"),i=e(".js-left",r),s=e(".js-right",r),o=new t(r);s.click(function(){o.setEffect("slideLeft"),o.gonext(),u()}),i.click(function(){o.setEffect("slideRight"),o.goback(),u()})});require(["other.jquery"],function(e){e(".js-xkfigure").on("mouseenter",function(t){e(this).find(".js-xkfigure-hover").show()}),e(".js-xkfigure").on("mouseleave",function(t){e(this).find(".js-xkfigure-hover").hide()})});require(["other.jquery"],function(e){e(".js-irank").each(function(t,n){var r=e(".rank-current",e(n)),i=e(".js-irank-item",e(n));i.on("mouseenter",function(t){var n=e(this);if(n.hasClass("rank-current"))return;r.removeClass("rank-current"),n.addClass("rank-current"),r=n})})});require(["other.jquery","eapp.record","elego.format"],function(e,t,n){var r=e("#js-guess"),i="xiankanguess/getindex",s=t.parseAKey("all"),o={index:0,movie:1,tv:2,zongyi:3,dongman:4},u={1:"\u7535\u5f71",2:"\u7535\u89c6\u5267",3:"\u7efc\u827a",4:"\u52a8\u6f2b"},a={totaln:1,n:1,t:o.index,i:0},f={tabwrap:'<div class="i-guess-tabbar js-guess-tabbar">#{tab}</div>',tab:'<a data-type="#{type}" class="js-guess-tab i-guess-tab #{classname}">#{txt}</a>',itemwrap:'<div class="p-content-left"><ul class="i-guess-content w-figure-list w-figure-list-20xauto g-clear">#{list}</ul></div>',item:['<li class="w-figure w-figure-180x310 ">','<a class="w-figure-imglink g-playicon js-playicon" href="#{url}">','<img src="#{cover}" data-src="#{cover}" alt="#{title}">','<span class="w-figure-hintbg"></span>','<span class="w-figure-hint">#{updateinfo}</span>',"</a>",'<h4><a class="w-figure-title" href="#{url}">#{title}</a></h4>','<div class="w-figure-desc">#{desc}</div>',"</li>"].join(""),movie:'<p class="right-movie-wrap"><a href="#{url}" class="right-movie">\u300a#{title}\u300b</a></p>',detail:['<div class="p-content-right">','<div class="i-guess-right">','<p class="right-tags">',"<span>#{tag}</span>","</p>",'<p class="right-desc">\u56e0\u4e3a\u60a8\u770b\u8fc7\uff1a</p>',"#{movies}",'<a class="guess-btn js-guess-change #{isDisable} g-clear">\u6362\u4e00\u6362</a>',"</div>","</div>"].join("")},l=function(e){var t=n(f.item,e,function(e,t){return{url:t.url,cover:t.cover,title:t.title,updateinfo:t.updateinfo,desc:t.minidesc}},{isEscape:!1});return n(f.itemwrap,{list:t},{isEscape:!1})},c=function(e,t,r){var i=n(f.movie,e,function(e,t){return{url:t.url,title:t.title}},{isEscape:!1});return n(f.detail,{tag:t,movies:i,isDisable:r>1?"":"disable"},{isEscape:!1})},h=function(e,t){var r=n(f.tab,e,function(e,n){return{type:n,classname:n==t?"current":"",txt:u[n]}},{isEscape:!1});return n(f.tabwrap,{tab:r},{isEscape:!1})};r.on("click",".js-guess-change",function(t){if(a.totaln==1)return;a.n+1>a.totaln?a.n=1:a.n++,e.ajax({url:i,data:{v:s,n:a.n,t:a.t,i:a.i},success:function(t){if(t.error==0){var n=t.data,r=l(n.tjDatas),i=c(n.gatherDatas,n.gatherFeature,n.grouptotal);e("#js-guess-main")&&e("#js-guess-main").html(r+i)}},dataType:"json"})}),r.on("click",".js-guess-tab",function(t){var n=e(this),o=n.attr("data-type");if(o==a.t)return;a.t=o,a.n=1,e.ajax({url:i,data:{v:s,n:a.n,t:a.t,i:a.i},success:function(t){if(t.error==0){var i=t.data;a.totaln=i.grouptotal;var s=l(i.tjDatas),o=c(i.gatherDatas,i.gatherFeature,i.grouptotal);e(".js-guess-tabbar .current",r).removeClass("current"),n.addClass("current"),e("#js-guess-main")&&e("#js-guess-main").html(s+o)}},dataType:"json"})}),e.ajax({url:i,data:{v:s,n:a.n,t:a.t,i:a.i},success:function(t){if(t.error==0){var n=t.data;a.totaln=n.grouptotal;var i=h(n.tabCat,n.category),s=l(n.tjDatas),o=c(n.gatherDatas,n.gatherFeature,n.grouptotal);r.html([i,'<div id="js-guess-main">',s,o,"</div>"].join("")),e("#js-guess-wrapper").show()}},dataType:"json"})});require(["other.jquery"],function(e){function i(){var t=!1,i=null,s=null,o=n.get(0).scrollHeight;r.each(function(r,o){var u=e(o).attr("id")+"-item";e(o).on("click",function(r){if(t)return;t=!0,i&&i.removeClass("current"),e(o).addClass("current"),i=e(o),s&&s.removeClass("current"),e("#"+u).addClass("current"),s=e("#"+u);var a=s.position().top+n[0].scrollTop;n.scrollTop(a),t=!1})});var u=(new Date).getDay(),a=u==0?6:u-1;e("#js-ebar"+a).click()}var t=e("#js-everyday"),n=e(".js-scroll",t),r=e(".js-everyday-bar",t);i()});require(["other.jquery","eblock.feedback"],function(e,t){function o(){e(window).scrollTop()<800?n.hide():n.show()}function a(){e(window).on("scroll",function(){u&&window.clearTimeout(u),u=window.setTimeout(function(){o(),u=null},200)}),i.click(function(){return e(window).scrollTop(0),!1}),r.click(function(){t.show();return}),e(window).on("resize",function(e){setTimeout(function(){s()},100)})}var n=e("#js-iopt"),r=e(".js-feedback",n),i=e(".js-gotop",n),s=function(){var t=e(window).width();e("body").hasClass("g-wide")&&t<1348?n.addClass("i-opt-fix"):t<1110?n.addClass("i-opt-fix"):n.removeClass("i-opt-fix")},u=null;a(),s()});define("eblock.join",["other.jquery","eblock.signin","eblock.registe","eblock.retrivepwd","eblock.registeok","eapp.signup","eapp.placeholder","eblock.otherlogin","eblock.signclew","elego.event","elego.cookie","eblock.codesignin"],function(e,t,n,r,i,s,o,u,a,f,l,c){function S(e,t){y=e?!1:!0,b=t,n.show()}function x(e,t){y=e?!1:!0,b=t,n.show()}function T(){s.logout(function(){window.location.reload()},function(){window.location.reload()})}function N(e,t,n){s.getUserInfo(e,t,n)}function C(e){e=e||{};var s=e.defaultOptions||{},o=e.signinOptions||s,f=e.registeOptions||s,h=e.retrivepwdOptions||s,p=e.registeokOptions||s,d=e.codesigninOptions||s,v=e.isFromCache||!1;t.init(o),n.init(p),r.init(h),i.init(p),c.init(d),u.init(),a.init(),t.on("registe",function(){n.show()}),t.on("retrivepwd",function(){r.show()}),t.on("codelogin",function(){c.show()}),n.on("signin",function(){t.show()}),n.on("registeok",function(e){i.setData(e),i.show()}),r.on("signin",function(){t.show()}),r.on("codesignin",function(){c.show()}),c.on("signin",function(){t.show()}),c.on("retrivepwd",function(){r.show()}),N(v,function(e){e.isLogin=!0,e.token=l.get("xk_token"),E.emitOnce("ready",e)},function(e){var t={};t.isLogin=!1,t.msg=e,E.emitOnce("ready",t)}),C=function(){}}function k(e,t){t=t||{},t.isFromCache===undefined&&(t.isFromCache=!0),t.isFromCache?s.getUserInfo(!0,e,function(){S()}):N(e,function(){S()})}function L(){s.getUserInfo(function(e){var t={systemdata:e,ousidedata:b};E.emit("loginsucc",t)}),E.emit("login",b)}function A(){t.hide(),n.hide(),i.hide(),r.hide(),c.hide(),y?window.location.reload():L()}var h=e(".ea-login input[placeholder]"),p=e("#js-eb-signin"),d=e("#js-eb-registe"),v=e("#js-eb-registeok"),m=e("#js-eb-retrivepwd-fg-con"),g=e("#js-eb-codesignin"),y=!0,b,w={obj:h,h:40,color:"#dadada"};o.init(w);var E={};return document.onkeydown=function(e){window.event&&(e=window.event);var s=e.charCode||e.keyCode;if(s==13){if(!p.is(":hidden")){t.triggerSub();return}if(!d.is(":hidden")){n.triggerSub();return}if(!v.is(":hidden")){i.triggerSub();return}if(!m.is(":hidden")){r.triggerSub();return}if(!g.is(":hidden")){c.triggerSub();return}}},t.on("loginsucc",function(){t.hide(),y?window.location.reload():L()}),c.on("codeloginsucc",function(){c.hide(),y?window.location.reload():L()}),i.on("registesucc",function(){i.hide(),y?window.location.reload():L()}),r.on("retrivepwdsucc",function(){r.hide(),y?window.location.reload():L()}),E={init:C,signIn:S,signUp:x,signOut:T,getUserInfo:N,ensureLogin:k,otherLogin:A},f.eventable(E),E});define("eapp.placeholder",["other.jquery"],function(e){function n(e){t.init(e)}var t={_check:function(){return"placeholder"in document.createElement("input")},init:function(e){this._check()||this.creatClew(e)},creatClew:function(t){var n=t.obj,r=t.h,i=t.color;n.each(function(t,n){var s=e(this),o=s.attr("placeholder");s.wrap(e("<div></div>").css({position:"relative",zoom:"1",border:"none",background:"none",padding:"none",margin:"none",display:"inline-block"}));var u=s.css("margin-left"),a=s.parent().height,f=s.css("padding-top"),l=e("<span></span>").text(o).css({position:"absolute",left:0,top:f,height:r+"px",lineHeight:r+"px",paddingLeft:u,color:i,textAlign:"left",width:"auto",display:"inline"}).appendTo(s.parent());s.focusin(function(e){l.hide()}).focusout(function(e){s.val()||l.show()}),l.click(function(e){l.hide(),s.focus()})})}};return{init:n}});define("eblock.signin",["other.jquery","eapp.closedialog","eapp.signup","elego.event"],function(e,t,n,r){function m(e){e.isFixed=e.isFixed||!0,e.shim=e.shim||!0,d=new t(i,e)}function g(){d.show()}function y(){b(),d.hide()}function b(){i.find(".js-eb-signin-c-tel input").val(""),i.find(".js-eb-signin-c-pwd input").val(""),i.find(".js-eb-signin-error").html("")}function w(){u.trigger("click")}var i=e("#js-eb-signin"),s=e(".js-retrivepwd",i),o=e(".js-registe",i),u=e(".js-eb-signin-c-btn",i),a=e(".js-eb-signin-c-check",i),f=e(".js-eb-signin-error",i),l=i.find(".js-close"),c=e(".js-eb-signin-c-tel",i),h=e(".js-eb-signin-c-pwd",i),p={noTel:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",telError:"\u8f93\u5165\u624b\u673a\u53f7\u4e0d\u5408\u6cd5",noPwd:"\u8bf7\u8f93\u5165\u5bc6\u7801",logining:"\u767b\u5f55\u4e2d...",login:"\u7acb\u5373\u767b\u5f55"},d=null,v={};return l.on("click",function(){b()}),o.click(function(){y(),v.emit("registe")}),s.find("span").click(function(){y(),v.emit("retrivepwd")}),a.children().on("click",function(){if(e(this).hasClass("eb-signin-c-check-tel")){y(),v.emit("codelogin");return}var t=a.attr("data"),n=a.find("b");t&&t=="1"?(n.addClass("b-nocheck"),a.attr("data","0")):(n.removeClass("b-nocheck"),a.attr("data","1"))}),u.hover(function(){e(this).find("div").show()},function(){e(this).find("div").hide()}),c.hover(function(){e(this).addClass("eb-signin-c-tel-hover")},function(){e(this).removeClass("eb-signin-c-tel-hover")}),h.hover(function(){e(this).addClass("eb-signin-c-pwd-hover")},function(){e(this).removeClass("eb-signin-c-pwd-hover")}),u.on("click",function(){var t=e.trim(i.find(".js-eb-signin-c-tel input").val()),r=e.trim(i.find(".js-eb-signin-c-pwd input").val()),s=a.attr("data")||"0",o={tel:t,pwd:r,autoLogin:s,errorObj:f,loginType:1},l=n.checkMobile(t);if(l){n.setErrorInfo(o.errorObj,l);return}if(o.pwd==""){n.setErrorInfo(o.errorObj,p.noPwd);return}n.setErrorInfo(o.errorObj,""),u.find("b").html(p.logining),u.css("cursor","default"),n.login(o,function(){v.emit("loginsucc")},function(e){u.find("b").html(p.login),u.css("cursor","pointer"),n.setErrorInfo(o.errorObj,e)})}),v={init:m,hide:y,show:g,triggerSub:w},r.eventable(v),v});define("eapp.signup",["other.jquery","elego.cookie","elego.serverdata"],function(e,t,n){var r={host:n.get("domain.my")||"http://my.360kan.com",httpshost:n.get("domain.httpsmy")||"https://my.360kan.com",XKhost:n.get("domain.xkmy")||"http://my.xiankan.com",loginFail:"\u767b\u5f55\u5931\u8d25",networkError:"\u7f51\u7edc\u9519\u8bef\uff0c\u83b7\u53d6\u5931\u8d25",pwdLess:"\u5bc6\u7801\u4e0d\u80fd\u5c11\u4e8e6\u4f4d",pwdMany:"\u5bc6\u7801\u4e0d\u80fd\u591a\u4e8e18\u4f4d",pwdNoRule:"\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u7b26\u5408\u89c4\u8303",noTel:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",telError:"\u8f93\u5165\u624b\u673a\u53f7\u4e0d\u5408\u6cd5",noCode:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",noPwd:"\u8bf7\u8f93\u5165\u5bc6\u7801",pwdDiffer:"\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4",protocol:"\u8bf7\u540c\u610f\u6ce8\u518c\u534f\u8bae\u53ca\u7248\u6743\u58f0\u660e",secondClew:"\u79d2\u540e\u53ef\u91cd\u53d1",getCodeClew:"\u83b7\u53d6\u9a8c\u8bc1\u7801"},i={setErrorInfo:function(e,t){if(t=="")e.html(t);else{var n="<b></b>"+t;e.html(n)}},checkMobile:function(e){return e==""?r.noTel:/^1[3578]\d{9}$/.test(e)?"":r.telError},checkPwd:function(e){if(e=="")return r.noPwd;for(var t=0;t<e.length;t++){var n=e.charAt(t).charCodeAt();if(n<33||n>126)return r.pwdNoRule}return i.checkPwdLength(e)},comparePwd:function(e,t){return e!=t?r.pwdDiffer:""},checkPwdLength:function(e){return e.length<6?r.pwdLess:e.length>18?r.pwdMany:""},checkCode:function(e){return e==""?r.noCode:""},login:function(t,n,s){var o,u;t.loginType=="1"?(o=r.httpshost+"/login/pclogin",u={loginPhone:t.tel,password:t.pwd,keepLogin:t.autoLogin}):(o=r.httpshost+"/login/pcloginbycaptcha",u={loginPhone:t.tel,captcha:t.code,keepLogin:1}),e.ajax({url:o,data:u,dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?(n&&n(),i.sendLoginXianKan(e.data)):s&&s(e.msg)}})},sendCode:function(t,n,i){e.ajax({url:r.host+"/reg/getcaptcha",data:{loginPhone:t.tel,act:t.act},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?(t.obj.addClass(t.classname),n&&n(e.data)):i&&i(e.msg)}})},changeVcodeClew:function(t,n){function s(e){var i=window.setInterval(function(){var s=0;e>0?(s=Math.floor(e),t.strObj.html(s+r.secondClew)):(clearInterval(i),t.strObj.html(r.getCodeClew),t.obj.attr("rel",""),t.obj.removeClass(t.classname),n&&n()),e--},1e3)}t.strObj.html(t.num+r.secondClew);var i=parseInt(t.num-1);e(function(){s(i)})},reg:function(t,n,s){e.ajax({url:r.httpshost+"/reg/pcregister",data:{loginPhone:t.tel,captcha:t.code,password:t.pwd},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?(n&&n(e.data),i.sendLoginXianKan(e.data)):s&&s(e.msg)}})},forgetPwd:function(t,n,s){e.ajax({url:r.httpshost+"/login/pcretrievepasswd",data:{loginPhone:t.tel,captcha:t.code,password:t.pwd},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?(n&&n(),i.sendLoginXianKan(e.data)):s&&s(e.msg)}})},saveUserName:function(t,n,i){e.ajax({url:r.host+"/reg/savenickname",data:{nickname:t.nickname,crumb:t.crumb},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?n&&n():i&&i(e.msg)}})},checkisRegTel:function(t,n,i){e.ajax({url:r.host+"/reg/checkloginphone",data:{loginPhone:t},dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?n&&n(e.data):i&&i(e.msg)}})},logout:function(t,n){e.ajax({url:r.host+"/login/pclogout",data:null,dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?t&&t():n&&n(e.msg)}})},sendLoginXianKan:function(t){e.ajax({url:r.XKhost+"/login/logintoxk",data:{s:t.setCookie,clientIp:t.clientIp,timestamp:t.timestamp,sign:t.sign},dataType:"jsonp",jsonp:"cb",success:function(e){}})},getUserInfo:function(n,i,s){if(typeof n=="function")s=i,i=n;else if(n===!0){t.get("xkuc")?i({token:t.get("xk_token")}):s();return}if(!t.get("xkuc")){s&&s();return}e.ajax({url:r.host+"/login/checkiflogin",data:null,dataType:"jsonp",jsonp:"cb",success:function(e){e.error==0?i&&i(e.data):s&&s(e.msg)}})}};return i});define("elego.dialog",["elego.mask","other.jquery","elego.event","elego.browser"],function(e,t,n,r){function s(e,t){if(!e)return this;this._init(e,t)}var i={fixedClass:"g-dialog-fixed",shimHtml:'<iframe frameborder="0" class="g-dialog-shim"></iframe>',shimWrapHtml:'<div class="g-dialog-shimwrap"></div>'};return s.prototype={_init:function(e,n){n=n||{},this._context=e,n.showMask===undefined?this._showMask=!0:this._showMask=n.showMask,n.effect===undefined?this._effect={type:"none"}:this._effect=n.effect,n.shim&&(e.children().wrapAll(i.shimWrapHtml),e.prepend(i.shimHtml)),this._container=n.container||t(window),this._isFixed=n.isFixed||!1,this._isFixed&&this._context.addClass(i.fixedClass),n.name&&this._context.addClass(n.name),this._width=e.width(),this._height=e.height()},_setPosition:function(){var e=(this._container.height()-this._height)/2,n=(this._container.width()-this._width)/2;this._isFixed||(e+=t(window).scrollTop()),this._context.css({left:n}),this._isFixed&&r.ie==6?this._context.css({"margin-top":-this._height/2}):this._context.css({top:e})},show:function(){this._setPosition(),this._showMask&&e.show();switch(this._effect.type){case"fade":this._context.fadeIn();break;default:this._context.show()}this.emit("show")},hide:function(){this._showMask&&e.hide();switch(this._effect.type){case"fade":this._context.fadeOut();break;default:this._context.hide()}this.emit("hide")}},n.eventable(s),s});define("eapp.closedialog",["elego.dialog","other.jquery"],function(e,t){function n(n,r){r=r||{},e.call(this,n,r);var i=this;t(r.closebtnHook||".js-close").click(function(){i.hide()}),t(window).resize(function(){i._setPosition()})}return n.prototype=new e,n});define("eblock.otherlogin",["other.jquery","elego.event"],function(e,t){function n(){var t=e(".js-eb-otherlogin"),n={},r=800,i=600,s=(window.screen.availHeight-30-i)/2,o=(window.screen.availWidth-10-r)/2;t.on("click",function(){try{document.domain="360kan.com"}catch(e){return}}),t.find(".eb-otherlogin-right-qqbtn").on("click",function(){var e=encodeURIComponent("http://my.360kan.com/oauthlogin/callback?site=qq&destUrl=http://my.360kan.com/&client=pc");window.open("http://openapi.qzone.qq.com/oauth/show?which=Login&display=pc&response_type=code&client_id=101209035&redirect_uri="+e,"_blank"," height="+i+",width="+r+", Left="+o+",Top="+s+", menubar=no,titlebar=no,scrollbar=no,toolbar=no, status=no,location=no")}),t.find(".eb-otherlogin-right-wbbtn").on("click",function(){var e=encodeURIComponent("http://my.360kan.com/oauthlogin/callback?site=weibo&destUrl=http://my.360kan.com/&client=pc");window.open("https://api.weibo.com/oauth2/authorize?response_type=code&client_id=2447756523&redirect_uri="+e+"&forcelogin=true","_blank"," height="+i+",width="+r+", Left="+o+",Top="+s+", menubar=no,titlebar=no,scrollbar=no,toolbar=no, status=no,location=no")}),t.find(".eb-otherlogin-ro-360").on("click",function(){var e=encodeURIComponent("http://my.360kan.com/oauthlogin/callback?site=360&destUrl=http://my.360kan.com/&client=pc");window.open("https://openapi.360.cn/oauth2/authorize?response_type=code&client_id=7267346f6eb2ac037a563f199b7ed14d&redirect_uri="+e+"&forcelogin=true&relogin=www.360kan.com","_blank"," height="+i+",width="+r+", Left="+o+",Top="+s+", menubar=no,titlebar=no,scrollbar=no,toolbar=no, status=no,location=no")}),t.find(".eb-otherlogin-ro-wx").on("click",function(){var e=encodeURIComponent("http://my.360kan.com/oauthlogin/callback?site=weixin&destUrl=http://my.360kan.com/&client=pc");window.open("https://open.weixin.qq.com/connect/qrconnect?appid=wxcb90abeeb0d519ad&redirect_uri="+e+"&response_type=code&scope=snsapi_login","_blank"," height="+i+",width="+r+", Left="+o+",Top="+s+", menubar=no,titlebar=no,scrollbar=no,toolbar=no, status=no,location=no")})}return exporter={init:n},t.eventable(exporter),exporter});define("eblock.signclew",["other.jquery","elego.cookie"],function(e,t){function n(){var n=e(".eb-signclew"),r=e("b",n);r.on("click",function(){n.hide(),t.set("signclew","1",{domain:".360kan.com"})});var i=t.get("signclew");i||n.show()}return{init:n}});define("eblock.registe",["other.jquery","eapp.closedialog","eapp.signup","elego.event"],function(e,t,n,r){function g(e){e.isFixed=e.isFixed||!0,e.shim=e.shim||!0,v=new t(i,e)}function y(){v.show()}function b(){w(),v.hide()}function w(){i.find(".js-eb-registe-reg-tel input").val(""),i.find(".js-eb-registe-reg-code input").val(""),i.find(".js-eb-registe-reg-pwd input").val(""),i.find(".js-eb-registe-error").html("")}function E(){u.trigger("click")}var i=e("#js-eb-registe"),s=e(".js-signin",i),o=e(".js-eb-registe-reg-clew",i),u=i.find(".js-eb-registe-reg-btn"),a=i.find(".js-eb-registe-reg-code b"),f=i.find(".js-eb-registe-error"),l=i.find(".js-close"),c=e(".js-eb-registe-reg-tel",i),h=e(".js-eb-registe-reg-pwd",i),p=e(".js-eb-registe-reg-code",i),d={protocol:"\u8bf7\u540c\u610f\u6ce8\u518c\u534f\u8bae\u53ca\u7248\u6743\u58f0\u660e",codeNum:59},v=null,m={};return l.on("click",function(){w()}),s.click(function(){b(),m.emit("signin")}),u.hover(function(){e(this).find("div").show()},function(){e(this).find("div").hide()}),a.hover(function(){e(this).attr("rel")!="1"&&e(this).find("p").show()},function(){e(this).find("p").hide()}),c.hover(function(){e(this).addClass("eb-registe-reg-tel-hover")},function(){e(this).removeClass("eb-registe-reg-tel-hover")}),h.hover(function(){e(this).addClass("eb-registe-reg-pwd-hover")},function(){e(this).removeClass("eb-registe-reg-pwd-hover")}),p.find("div").hover(function(){p.addClass("eb-registe-reg-code-hover")},function(){p.removeClass("eb-registe-reg-code-hover")}),o.find("b").on("click",function(){var t=o.attr("data");t&&t=="1"?(e(this).addClass("b-nocheck"),o.attr("data","0")):(e(this).removeClass("b-nocheck"),o.attr("data","1"))}),a.on("click",function(){var t=e(this).attr("rel");if(!t||t==""){var r=e.trim(i.find(".js-eb-registe-reg-tel input").val()),s=n.checkMobile(r);if(s){n.setErrorInfo(f,s);return}e(this).attr("rel","1");var o={tel:r,classname:"eb-registe-reg-sendcode",obj:a,act:"register"};n.sendCode(o,function(e){var t={obj:a,num:d.codeNum,classname:o.classname,strObj:a.find("label")};n.changeVcodeClew(t)},function(e){a.attr("rel",""),n.setErrorInfo(f,e)})}}),u.on("click",function(){var t=e.trim(i.find(".js-eb-registe-reg-tel input").val()),r=e.trim(i.find(".js-eb-registe-reg-code input").val()),s=i.find(".js-eb-registe-reg-pwd input").val(),u=o.attr("data"),a={tel:t,code:r,pwd:s,prot:u,errorObj:f},l=n.checkMobile(t);if(l){n.setErrorInfo(a.errorObj,l);return}var c=n.checkCode(a.code);if(c){n.setErrorInfo(a.errorObj,c);return}var h=n.checkPwd(a.pwd);if(h){n.setErrorInfo(a.errorObj,h);return}if(!a.prot||a.prot=="0"){n.setErrorInfo(a.errorObj,d.protocol);return}n.setErrorInfo(a.errorObj,""),n.reg(a,function(e){b(),m.emit("registeok",e)},function(e){n.setErrorInfo(a.errorObj,e)})}),i.find(".js-eb-registe-reg-tel input").on("blur",function(){var t=e.trim(e(this).val());if(t=="")return;var r=n.checkMobile(t);if(r){n.setErrorInfo(f,r);return}n.checkisRegTel(t,function(e){n.setErrorInfo(f,"");return},function(e){n.setErrorInfo(f,e);return})}),m={init:g,hide:b,show:y,triggerSub:E},r.eventable(m),m});define("eblock.retrivepwd",["other.jquery","eapp.closedialog","eapp.signup","elego.event"],function(e,t,n,r){function g(e){e.isFixed=!0,d=new t(i,e)}function y(){d.show()}function b(){w(),d.hide()}function w(){e(".js-eb-retrivepwd-fg-tel input",i).val(""),e(".eb-retrivepwd-fg-code input",i).val(""),e(".js-eb-retrivepwd-fg-newpwd input",i).val(""),e(".js-eb-retrivepwd-fg-newpwd2 input",i).val(""),e(".js-eb-retrivepwd-fg-error",i).html("")}function E(){u.trigger("click")}var i=e("#js-eb-retrivepwd"),s=i.find(".js-eb-retrivepwd-fg-codewrap b"),o=i.find(".js-eb-retrivepwd-fg-btn-back"),u=i.find(".js-eb-retrivepwd-fg-btn"),a=i.find(".js-eb-retrivepwd-fg-error"),f=e(".eb-retrivepwd-fg-con",i),l=e(".eb-retrivepwd-succwrap",i),c=e("button",l),h=i.find(".js-close"),p=e(".js-eb-retrivepwd-nav-title-code",i),d=null,v={},m={noPwd2:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801",noRegTel:"\u8d26\u53f7\u4e0d\u5b58\u5728\uff0c\u8bf7\u5148\u6ce8\u518c",codeNum:59};return p.on("click",function(){b(),v.emit("codesignin")}),u.hover(function(){e(this).find("div").show()},function(){e(this).find("div").hide()}),s.hover(function(){e(this).attr("rel")!="1"&&e(this).find("em").show()},function(){e(this).find("em").hide()}),f.find("p").hover(function(){e(this).hasClass("eb-retrivepwd-fg-code")?e(this).addClass("eb-retrivepwd-fg-code-hover"):e(this).addClass("eb-retrivepwd-fg-hover")},function(){e(this).hasClass("eb-retrivepwd-fg-code")?e(this).removeClass("eb-retrivepwd-fg-code-hover"):e(this).removeClass("eb-retrivepwd-fg-hover")}),h.on("click",function(){w()}),o.on("click",function(){b(),v.emit("signin")}),u.on("click",function(){var t=e.trim(i.find(".js-eb-retrivepwd-fg-tel input").val()),r=e.trim(i.find(".js-eb-retrivepwd-fg-codewrap input").val()),s=i.find(".js-eb-retrivepwd-fg-newpwd input").val(),o=i.find(".js-eb-retrivepwd-fg-newpwd2 input").val(),u={tel:t,code:r,pwd:s,pwd2:o,errorObj:a},c=n.checkMobile(t);if(c){n.setErrorInfo(u.errorObj,c);return}var h=n.checkCode(u.code);if(h){n.setErrorInfo(u.errorObj,h);return}var p=n.checkPwd(u.pwd);if(p){n.setErrorInfo(u.errorObj,p);return}if(u.pwd2==""){n.setErrorInfo(u.errorObj,m.noPwd2);return}var d=n.comparePwd(u.pwd,u.pwd2);if(d){n.setErrorInfo(u.errorObj,d);return}n.setErrorInfo(u.errorObj,""),n.forgetPwd(u,function(){f.hide(),l.show()},function(e){n.setErrorInfo(u.errorObj,e)})}),s.on("click",function(){var t=e(this).attr("rel");if(!t||t==""){var r=e.trim(i.find(".js-eb-retrivepwd-fg-tel input").val()),o=n.checkMobile(r);if(o){n.setErrorInfo(a,o);return}e(this).attr("rel","1");var u={tel:r,classname:"eb-retrivepwd-fg-sendcode",obj:s,act:"retrievepassword"};n.sendCode(u,function(e){var t={obj:s,num:m.codeNum,classname:u.classname,strObj:s.find("label")};n.changeVcodeClew(t)},function(e){n.setErrorInfo(a,e),s.attr("rel","")})}}),i.find(".js-eb-retrivepwd-fg-tel input").on("blur",function(){var t=e.trim(e(this).val());if(t=="")return;var r=n.checkMobile(t);if(r){n.setErrorInfo(a,r);return}n.checkisRegTel(t,function(e){n.setErrorInfo(a,m.noRegTel);return},function(e){n.setErrorInfo(a,"");return})}),c.on("click",function(){v.emit("retrivepwdsucc")}),e(".js-close",i).on("click",function(){l.is(":hidden")||v.emit("retrivepwdsucc")}),v={init:g,hide:b,show:y,triggerSub:E},r.eventable(v),v});define("eblock.registeok",["other.jquery","eapp.closedialog","eapp.signup","elego.event"],function(e,t,n,r){function d(e){e.isFixed=!0,l=new t(i,e)}function v(){l.show()}function m(){y(),l.hide()}function g(e){c=e}function y(){e(".js-eb-registeok-rs-tel input",i).val(""),e(".js-eb-registeok-error",i).html("")}function b(){s.trigger("click")}var i=e("#js-eb-registeok"),s=i.find(".js-eb-registeok-rs-btn"),o=i.find(".js-eb-registeok-error"),u=i.find(".js-close"),a=e(".js-eb-registeok-rs-btn-back",i),f=e(".js-eb-registeok-rs-tel",i),l=null,c,h={nicknameClew:"\u8bf7\u8f93\u51652-15\u4e2a\u5b57",parmeError:"\u4f20\u5165\u53c2\u6570\u9519\u8bef"},p={};return s.hover(function(){e(this).find("div").show()},function(){e(this).find("div").hide()}),f.hover(function(){e(this).addClass("eb-registeok-rs-tel-hover")},function(){e(this).removeClass("eb-registeok-rs-tel-hover")}),a.on("click",function(){y(),p.emit("registesucc")}),s.on("click",function(){var t=e.trim(i.find(".js-eb-registeok-rs-tel input").val()),r=c?c.crumb||"":"",s={nickname:t,crumb:r,errorObj:o};if(s.nickname.length<2){n.setErrorInfo(s.errorObj,h.nicknameClew);return}if(s.nickname.length>15){n.setErrorInfo(s.errorObj,h.nicknameClew);return}if(r==""){n.setErrorInfo(s.errorObj,h.parmeError);return}n.saveUserName(s,function(){m(),p.emit("registesucc")},function(e){n.setErrorInfo(s.errorObj,e)})}),u.on("click",function(){m(),p.emit("registesucc")}),e(".js-close",i).on("click",function(){p.emit("registesucc")}),p={init:d,hide:m,show:v,setData:g,triggerSub:b},r.eventable(p),p});define("eblock.codesignin",["other.jquery","eapp.closedialog","eapp.signup","elego.event"],function(e,t,n,r){function m(e){e.isFixed=!0,p=new t(i,e)}function g(){p.show()}function y(){b(),p.hide()}function b(){e(".js-eb-codesignin-tel input",i).val(""),e(".js-eb-codesignin-code input",i).val(""),e(".js-eb-codesignin-error",i).html("")}function w(){u.trigger("click")}var i=e("#js-eb-codesignin"),s=i.find(".js-eb-codesignin-codewrap b"),o=i.find(".js-eb-codesignin-btn-back"),u=i.find(".js-eb-codesignin-btn"),a=i.find(".js-eb-codesignin-error"),f=e(".js-eb-codesignin-con",i),l=e(".eb-codesignin-succwrap",i),c=i.find(".js-close"),h=e(".js-codesignin-nav-fgpwd",i),p=null,d={},v={noCode:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",noRegTel:"\u8d26\u53f7\u4e0d\u5b58\u5728\uff0c\u8bf7\u5148\u6ce8\u518c",logining:"\u767b\u5f55\u4e2d...",login:"\u786e \u5b9a",codeNum:59};return h.on("click",function(){y(),d.emit("retrivepwd")}),u.hover(function(){e(this).find("div").show()},function(){e(this).find("div").hide()}),s.hover(function(){e(this).attr("rel")!="1"&&e(this).find("em").show()},function(){e(this).find("em").hide()}),f.find("p").hover(function(){e(this).hasClass("eb-codesignin-tel")?e(this).addClass("eb-codesignin-tel-hover"):e(this).addClass("eb-codesignin-code-hover")},function(){e(this).hasClass("eb-codesignin-tel")?e(this).removeClass("eb-codesignin-tel-hover"):e(this).removeClass("eb-codesignin-code-hover")}),c.on("click",function(){b()}),o.on("click",function(){y(),d.emit("signin")}),u.on("click",function(){var t=e.trim(i.find(".js-eb-codesignin-tel input").val()),r=e.trim(i.find(".js-eb-codesignin-code input").val()),s={tel:t,code:r,autoLogin:1,errorObj:a,loginType:2},o=n.checkMobile(t);if(o){n.setErrorInfo(s.errorObj,o);return}if(s.code==""){n.setErrorInfo(s.errorObj,v.noCode);return}n.setErrorInfo(s.errorObj,""),u.find("b").html(v.logining),u.css("cursor","default"),n.login(s,function(){d.emit("codeloginsucc")},function(e){u.find("b").html(v.login),u.css("cursor","pointer"),n.setErrorInfo(s.errorObj,e)})}),s.on("click",function(){var t=e(this).attr("rel");if(!t||t==""){var r=e.trim(i.find(".js-eb-codesignin-tel input").val()),o=n.checkMobile(r);if(o){n.setErrorInfo(a,o);return}e(this).attr("rel","1");var u={tel:r,classname:"eb-codesignin-sendcode",obj:s,act:"login"};n.sendCode(u,function(e){var t={obj:s,num:v.codeNum,classname:u.classname,strObj:s.find("label")};n.changeVcodeClew(t)},function(e){n.setErrorInfo(a,e),s.attr("rel","")})}}),i.find(".js-eb-codesignin-tel input").on("blur",function(){var t=e.trim(e(this).val());if(t=="")return;var r=n.checkMobile(t);if(r){n.setErrorInfo(a,r);return}n.checkisRegTel(t,function(e){n.setErrorInfo(a,v.noRegTel);return},function(e){n.setErrorInfo(a,"");return})}),d={init:m,hide:y,show:g,triggerSub:w},r.eventable(d),d});define("eblock.feedback",["other.jquery","elego.json","elego.dialog"],function(e,t,n){var r=e("#js-eb-feedback"),i=r.find(".js-eb-feedbackform"),s={effect:"fade",shim:!0,isFixed:!0},o=function(e,t){n.call(this,e,t)};o.prototype=new n;var u=function(){i.get(0).reset(),r.find(".js-feedback-success").hide(),i.show(),r.find("textarea, input.number").removeClass("focus"),r.find(".tag li").removeClass("on").first().addClass("on")},a=function(){var t=this;r.find(".js-cancel a").click(function(e){return t.hide(),!1}),r.find(".tag li").click(function(t){var n=e(this).attr("data-text-default"),i=r.find("textarea");return e(this).addClass("on").siblings("li").removeClass("on"),i.hasClass("focus")||i.val(n).attr("data-text-default",n).removeClass("focus"),!1}),r.find("textarea, input.number").focus(function(){var t=e(this).addClass("focus").attr("data-text-default");r.find(".js-feedback-hit").hide(),this.value==t&&(this.value="")}).blur(function(){if(this.value.replace(/ /ig,"")==""){var t=e(this).removeClass("focus").attr("data-text-default");this.value=t}}),r.find(".js-submit-btn").click(function(t){var n=r.find(".js-message"),s=e.trim(n.val());if(-1!==e.inArray(s,["",n.attr("data-text-default")]))return r.find(".js-feedback-hit").show(),!1;var o=["",i.find(".on .m").html(),s].join("#");return r.find(".js-message-real").val(o),i.submit(),i.hide(),r.find(".js-feedback-success").show(),!1}),r.find(".js-feedback-again").click(function(){u()})},f=function(){var e=function(){var e={screen:"",browser:{}},n=window.navigator,r="userAgent,platform,product,language,oscpu,vendor,cookieEnabled,onLine,buildID".split(",");for(var i=0,s=r.length;i<s;++i)typeof n[r[i]]!="undefined"&&(e.browser[r[i]]=n[r[i]]);return e.screen=screen.width+"*"+screen.height,t.stringify(e)};r.find(".js-device-info").val(e()),r.find(".js-feedback-referer").val(window.location.href)},l=new o(r,s);return l.show=function(){u.call(this),o.prototype.show.call(this)},f.call(l),a.call(l),l});require(["other.jquery","elego.lazy"],function(e,t){var n=!1,r=null,i=150;e(".js-tab-switch").each(function(s,o){var u=e(".js-ibar",e(o)),a=e(".js-ibars .current",e(o)),f=e(".js-itab",e(o)),l=e(e(".js-itab",e(o))[0]);u.each(function(s,o){e(o).on("mouseenter",function(o){o.preventDefault();var u=e(this);if(n||u.hasClass("current"))return;r=setTimeout(function(){n=!0,u.addClass("current"),a.removeClass("current"),a=u,l.hide(),f.eq(s).show(),l=f.eq(s),t.add(e("img[data-src]")),n=!1},i)}),e(o).on("mouseleave",function(e){r&&clearTimeout(r)})}),e("#js-unique-ibar").trigger("mouseenter")}),t.add(e("img[data-src]"))});